---
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: carina-hook
webhooks:
  - name: pod-hook.carin.storage.io
    namespaceSelector:
      matchExpressions:
      - key: carina.storage.io/webhook
        operator: NotIn
        values: ["ignore"]
    clientConfig:
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUN5RENDQWJDZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRJeE1ERXhOVEF4TkRrd05sb1hEVE14TURFeE16QXhORGt3Tmxvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTlhJCm9NeFBBdk9peXN1MXdXSW5aMllkZGkwazFrQ1lVVzJ4N2xuWnZOTURMNHdOdHRHZ3p6QW1OREI1SjdUbWV5YkYKZDJYalZoallTMDRYYUFyUmJpME56bDBKSSs1SDBtWEZ5dWwzRkZ5VWQvdDQxckZhV0IvbVFGTHZCTjUwVFFyZApmOUtnTnJ0TW1PWE9yRStKUlAyNDNlYjFKenpmTTFXeTFlNklobXpJRG9CcXZaNnRFQ1NyOWZkUEdrZmhUQ3VXCjFxTW9jUVNpMTQ0a1lhb3JVTHBWUXk0UG9XbWN1TFo5emdBTmp2WnBZa1lKKzZ4UzB2NXhRYmg1bXYzMnRYZUsKbk1tTDlHU3lEU1k5cklPdkJsdnpsM2NLR25MM09WK05QSWJ5WU5LZkg0Y2UrVE41VHRiUjlQcWorMEFjT1pRQgpVV3JncGVEcDJlZlFnQVhtZ0JjQ0F3RUFBYU1qTUNFd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dFQkFJbURKaDBob0tKV3hWai9yWXdkNy9wQXkzREgKYjhQeGtQSU9QdkI0WHB0TjJnaXhFUjhaQWg5ZkdPN1F5THYrcmM2S1JUSnVsWkc2QisxaHpKMkhWM2FUZW5jVAo4dEtWWHMwY3o4TGIvb0xOdTJ2NzhaZFcyYWhpSGd4MWhIRnNMOCtJcEVPV1VpOFprMERuS2RuaGkzK1BWV2ZkCnZGOUFRcjZaalM2YnlJOXBtZTc2VVEvR05MeFMrcGwrejVUeDEzT0dXTG45Z3R6bW03NFYxUlZRUDBjamFNYS8KTXVsZXZ0YW9OSVdFTnZaWkFWTjlnRUpudnNNY1Q0WXg1anlRVFEyM2JtT1ZJMzRMTlR1YlVidmZCWVpsQStIMApWWjMwV3ZCcndnVHd2S2x2UGJVK0p2Q2V4VGc4Q2RVYzBEMFdiMzFmMFArbFV4cjVIaHhOSUhsN1RmND0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
      service:
        name: carina-controller
        namespace: kube-system
        path: /pod/mutate
        port: 443
    failurePolicy: Fail
    matchPolicy: Exact
    objectSelector: {}
    reinvocationPolicy: Never
    rules:
      - operations: ["CREATE"]
        apiGroups: [""]
        apiVersions: ["v1"]
        resources: ["pods"]
    admissionReviewVersions: ["v1beta1"]
    sideEffects: NoneOnDryRun
    timeoutSeconds: 30