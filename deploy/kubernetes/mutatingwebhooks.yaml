---
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: carina-hook
webhooks:
  - name: pod-hook.carina.storage.io
    namespaceSelector:
      matchExpressions:
      - key: carina.storage.io/webhook
        operator: NotIn
        values: ["ignore"]
    clientConfig:
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM1ekNDQWMrZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRJeE1EUXlNVEF4TlRFeE5sb1hEVE14TURReE9UQXhOVEV4Tmxvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBS1BYCi95OTZsM2lxYlU1dlN3ZDE2SW8vVyt1eVBXUjlJSE5LSmRJYmtxamU5YWdKcEZtd0lwckNQc3U2dHhPaTc4am4KaTl2ZytYZ0c3OCtTVENMamo2aVlUTXN0S29ucFhER00ySy9JK2lrN0lTV05yUnNqQkxYQTViNTBIR25ndFI5bgovWHcwQThwa05aaU9jY3k0M08rU0VEbTFRTzUzZVZXMkhPcmYrViswWkxoVFNiYllZZ3FmS2k1TG9HSEZvYXlHCmZsTHhRektsRFZ5MUk1emFvWXozL0ZCZjNsNllqMEdNQWVISmVxQ3E5NmZoTHhkSmZ5YTdySFRqZWs2cFRGKy8KMUo0ZksrWW5UekN0bjlFdnlOZUFZV3FuS3I4RlY1THJ4eXh5WGlpdHQ1K05aYUdQZDFBYytqVGlFb251c1lsbQo2MjJXWE1mMXdKYmFpeWJyQnMwQ0F3RUFBYU5DTUVBd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZJY3lkNVV5YjlOelMrUjEwdzgwUU04VkVjT21NQTBHQ1NxR1NJYjMKRFFFQkN3VUFBNElCQVFDZFNsQzRmQzhMeGdyYU9ZSXFsV09rTExoSVI3c2ZtRHczOHVxeXVHdEY4a1dmN0llYQo5N21MM25GbU1TU3R5bDNJRk95bnBPTHZ4ZHNmZ3BRbTdIWW9adlk2RjN1bEswNHlpd2M2TXcwR2xpTFZ3VUpwCjVuRFY1M1RKSmh2Zm1EOXAwbmREWGhWY2JnaG0xT090Q2M2cXVHaVR3U1ljdjBNTEZUZHNjKyt0Z1BQNmdsai8KYzZYMy93MGxvT2lKOEZ1TlE0OEM4eXZrMW90QmhLM21JZEh2bXRLb1htcThOVWVGUGxCQkxod3IxbFRFNkRLQQplYzcyMkxTc1BEYjA0Nk5FbWFqRy93RzEvMTVURkpJdmlPS1dyMlFWTm0zZzBrSVUwa3RsWG9vcGxydzZvYUlHCjVNSjlGV1RzTEdYYWhIdklSVlEvbFJmR05QYkNiaW9zMmxyQgotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
      service:
        name: carina-controller
        namespace: kube-system
        path: /pod/mutate
        port: 443
    failurePolicy: Fail
    matchPolicy: Exact
    objectSelector: {}
    reinvocationPolicy: Never
    rules:
      - operations: ["CREATE"]
        apiGroups: [""]
        apiVersions: ["v1"]
        resources: ["pods"]
    admissionReviewVersions: ["v1beta1"]
    sideEffects: NoneOnDryRun
    timeoutSeconds: 30