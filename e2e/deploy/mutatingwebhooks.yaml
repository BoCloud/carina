---
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: carina-hook
webhooks:
  - name: pod-hook.carina.storage.io
    namespaceSelector:
      matchExpressions:
      - key: carina.storage.io/webhook
        operator: NotIn
        values: ["ignore"]
    clientConfig:
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM1ekNDQWMrZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRJeE1EUXdNakF5TWprd01sb1hEVE14TURNek1UQXlNamt3TWxvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTFdiClhxWVh5V0FEVTFWNC8vR1V4VmlhMW9LT0hxdVdRTTBCZDFzdm9ZNHpnckNoK2hCeHRaQWRveHZKSnZLcDJiTlIKUENvbXB0aXhneUZvTXBpa0Vsbml1T2hGZG11NlpyTGIwaDYwdGwxUU5jeWFManJ0b0gzTUhNQStZVC9zcmhlVApSTGxna1poSlJDNkx5UmRqdUIxc2t5ZmxTZ1p1aXlGU0hGOW11QkJWMkdMYlJmTUV4N09IUG1HOHUrWmhBNk1tCllJdi9STmZ2M01KamdrUmxzbFJPMWJPMFZtZUMzWHRmaG4raHFZSlc1UWc1dGFNTUVPbXhkclRHVTVmNk12U0cKZWw2c2dzODFvbVBBUnFtdmlpVDkyL1pFYitBSEhoNUxVbkxLR3p6clcra1hsZmxMNngvUFhOemxKNFppUjZLTgp2SFIrZVVqczM3YnlWZndIUm9FQ0F3RUFBYU5DTUVBd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZJbmx1OEVwUmtIbWYrWTRxQ2tjUjZydC8xMUdNQTBHQ1NxR1NJYjMKRFFFQkN3VUFBNElCQVFCTlVxQWpFRDVtbGwzNldBWklWS1dzYjBNakwwM05Yc1dRWjV0eHRWYVBpN2lQekNMdgpyRm9LRkF1cUNQem1WeWhsNkdpK2c5eWRIZytJVmhjV2ZWZkVvaEgzTVBHcGE4MXlHQVdkYi9kUHVlSldtZVcyCmhPKzluM2xWdW1XNWt4aFdzSGxBRngrNlNjdmxscDVkbGFnRGdtVlpmQ084ZXhHYlZFTm5WK2RyRTlPbjI3NXUKZ3NJWEpPT0FnNStIdVFEdVJ6eHorN01xV3BWeUdYMlZ0RFZLTHJyMlFsbXVhNUVacWw5QWRPNld3WUYvbE1LWQptcndjZnJEMjBQdEVFdWlyeUhFSTM0bFoxQlAzUkhEYmFNNkZHVWhMQk9PMEE1Z2J2QXFzMjc0ZEd5UU9TWjNCCktxYmJXVVN3QnZCSS9ibmFWcEV4VklJai91eUQrZXVlUkZ3bgotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
      service:
        name: carina-controller
        namespace: kube-system
        path: /pod/mutate
        port: 443
    failurePolicy: Fail
    matchPolicy: Exact
    objectSelector: {}
    reinvocationPolicy: Never
    rules:
      - operations: ["CREATE"]
        apiGroups: [""]
        apiVersions: ["v1"]
        resources: ["pods"]
    admissionReviewVersions: ["v1beta1"]
    sideEffects: NoneOnDryRun
    timeoutSeconds: 30